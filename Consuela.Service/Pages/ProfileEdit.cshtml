@page
@model Consuela.Service.Pages.ProfileEditModel
@{
    var profile = Model.Profile;
    var i = 0;
}
<script src="~/js/ProfileEditService.js"></script>
<fieldset>
    <legend>Ignore</legend>
    <ul>
        <li>Files and directories to ignore</li>
        <li>Files can be exact naming or use a star pattern</li>
        <li>Case sensitivity applies</li>
    </ul>
    <h4>Files</h4>
    <input id="txtAddFile" type="text" /> <button onclick="btnAddFileOnClick()">Add</button><br/>
    <table class="form-control table table-striped table-secondary">
        <thead>
            <tr>
                <th>File pattern</th>
                <th>X</th>
            </tr>
        </thead>
        <tbody id="tbodyIgnoreFiles">
            @foreach(var file in profile.Ignore.Files)
            {
                <tr id="trIgnoreFiles_E@(i)">
                    <td>@(file)</td><td><button onclick="btnRemoveFileOnClick('trIgnoreFiles_E@(i)')">X</button></td>
                </tr>

                i++;
            }
        </tbody>
    </table>
    <h4>Directories</h4>
    <table class="form-control table table-striped table-secondary">
        <thead>
            <tr>
                <th>Absolute paths</th>
            </tr>
        </thead>
        <tbody>
            @foreach(var dir in profile.Ignore.Directories)
            {
                <tr>
                    <td>@(dir)</td>
                </tr>
            }
        </tbody>
    </table>
</fieldset>
<hr/>
<fieldset>
    <legend>Audit</legend>
    <label>Audit is turned on by default.</label><br/>
    <label>Disable:</label>&nbsp;<label>@(profile.Logging.Disable)</label><br/>
    <label>Path:</label>&nbsp;<label>@(profile.Logging.Path)</label><br/>
    <label>Retention:</label>&nbsp;<label>@(profile.Logging.RetentionDays)</label> Days<br/>
</fieldset>
<hr/>
<fieldset>
    <legend>Delete</legend>
    <label>Files and directories to scan for old files to delete.</label><br/>
    <label>Max Age: </label>&nbsp;<label>@(profile.Delete.FileAgeThreshold)</label> Days<br/>
    <label>Frequency: </label>&nbsp;<label>@(profile.Delete.Schedule)</label><br/>
    <h4>Paths</h4>
    <table class="form-control table table-striped table-secondary">
        <thead>
            <tr>
                <th>Search path</th>
                <th>Search pattern</th>
            </tr>
        </thead>
        <tbody>
            @foreach(var pp in profile.Delete.Paths)
            {
                <tr>
                    <td>@(pp.Path)</td>
                    <td>@(pp.Pattern)</td>
                </tr>
            }
        </tbody>
    </table>
</fieldset>
<hr />
<a href="~/ProfileView">Back</a>
